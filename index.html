<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    <title>AI掃除アドバイザー | 家中の汚れを自動判定</title>
    
    <!-- PWA & モバイル最適化メタタグ -->
    <meta name="description" content="AI掃除アドバイザーで家中の汚れを自動判定。最適な掃除方法と商品をAIが提案します。">
    <meta name="keywords" content="掃除,AI,クリーニング,汚れ判定,掃除方法,商品推薦">
    <meta name="author" content="AI掃除アドバイザー">
    
    <!-- モバイル対応 -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="AI掃除アドバイザー">
    
    <!-- アイコン -->
    <link rel="apple-touch-icon" sizes="180x180" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🤖</text></svg>">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🤖</text></svg>">
    
    <!-- ソーシャルメディア -->
    <meta property="og:title" content="AI掃除アドバイザー | 家中の汚れを自動判定">
    <meta property="og:description" content="AIが最適な掃除方法を提案。写真分析で汚れタイプを自動判定し、効果的な清掃方法をガイドします。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://cxmainte.com/tools/ai-cleaner/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AI掃除アドバイザー">
    <meta name="twitter:description" content="AIが最適な掃除方法を提案します">
    
    <!-- パフォーマンス最適化 -->
    <link rel="preconnect" href="https://m.media-amazon.com">
    <link rel="preconnect" href="https://amazon.co.jp">
    <link rel="dns-prefetch" href="//m.media-amazon.com">
    <link rel="dns-prefetch" href="//amazon.co.jp">
    
    <!-- Production Ready - All Local Dependencies -->
    <link rel="stylesheet" href="dist/tailwind-local.css">
    <script src="dist/lucide.min.js"></script>
    <script src="dist/crypto-js.min.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <style>
        /* ステップ進行インジケーター */
        .step-indicator {
            position: relative;
        }
        
        .step-indicator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #e5e7eb;
            z-index: 1;
        }
        
        .step-indicator .step {
            position: relative;
            z-index: 2;
            background: white;
            border: 2px solid #e5e7eb;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .step-indicator .step.active {
            border-color: #3b82f6;
            background: #3b82f6;
            color: white;
        }
        
        .step-indicator .step.completed {
            border-color: #10b981;
            background: #10b981;
            color: white;
        }
        
        /* アニメーション */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* カードホバーエフェクト */
        .choice-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .choice-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .choice-card.selected {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        /* モバイル最適化強化 */
        @media (max-width: 768px) {
            .container {
                padding-left: 0.75rem;
                padding-right: 0.75rem;
            }
            
            .choice-card {
                padding: 0.75rem;
                font-size: 0.9rem;
            }
            
            .choice-card .text-4xl {
                font-size: 2.5rem;
            }
            
            .step-indicator .step {
                width: 2rem;
                height: 2rem;
                font-size: 0.875rem;
            }
            
            h1 {
                font-size: 1.5rem !important;
            }
            
            h2 {
                font-size: 1.75rem !important;
                line-height: 1.3;
            }
            
            .grid-cols-2 {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            .md\\:grid-cols-3 {
                grid-template-columns: 1fr;
            }
            
            /* タッチターゲット最適化 */
            button, .choice-card {
                min-height: 44px;
                touch-action: manipulation;
            }
            
            /* モバイル専用スタイル */
            .mobile-optimized {
                padding: 0.5rem;
                margin: 0.5rem 0;
            }
            
            /* スワイプヒント */
            .swipe-hint {
                display: block;
                text-align: center;
                color: #6b7280;
                font-size: 0.75rem;
                margin-top: 0.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .choice-card {
                padding: 0.5rem;
                text-align: center;
            }
            
            .choice-card h3 {
                font-size: 0.875rem;
                margin-bottom: 0.25rem;
            }
            
            .choice-card p {
                font-size: 0.75rem;
                line-height: 1.3;
            }
            
            .step-indicator {
                transform: scale(0.9);
            }
        }
        
        /* ダークモード対応 */
        @media (prefers-color-scheme: dark) {
            .dark-mode-compatible {
                background-color: #1f2937;
                color: #f9fafb;
            }
        }
        
        /* アクセシビリティ：motion reduction */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
    
    <!-- ヘッダー -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto max-w-4xl px-4 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold text-gray-800">🤖 AI掃除アドバイザー</h1>
                <div class="text-sm text-gray-600">簡単3ステップ</div>
            </div>
        </div>
    </header>

    <!-- メインコンテナ -->
    <main class="container mx-auto max-w-4xl px-4 py-8">
        
        <!-- ステップインジケーター -->
        <div class="mb-8">
            <div class="step-indicator flex justify-between items-center max-w-md mx-auto">
                <div class="step active" id="step1-indicator">1</div>
                <div class="step" id="step2-indicator">2</div>
                <div class="step" id="step3-indicator">3</div>
                <div class="step" id="step4-indicator">4</div>
            </div>
            <div class="flex justify-between text-xs text-gray-600 max-w-md mx-auto mt-2">
                <span>場所選択</span>
                <span>汚れ程度</span>
                <span>写真(任意)</span>
                <span>結果表示</span>
            </div>
        </div>

        <!-- ステップ1: 場所選択 -->
        <div id="step1" class="step-content fade-in">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">🏠 清掃場所を選択してください</h2>
                <p class="text-gray-600">掃除したい場所をクリックしてください</p>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-8">
                <!-- モバイル用スワイプヒント -->
                <div class="swipe-hint col-span-full text-center text-sm text-gray-500 mb-2 md:hidden">
                    👆 お好みの場所をタップしてください
                </div>
                <div class="choice-card border-2 border-gray-200 rounded-xl p-6 text-center" data-location="kitchen">
                    <div class="text-4xl mb-2">🔥</div>
                    <h3 class="font-semibold text-gray-800">キッチン</h3>
                    <p class="text-sm text-gray-600">コンロ・シンク周り</p>
                </div>
                
                <div class="choice-card border-2 border-gray-200 rounded-xl p-6 text-center" data-location="bathroom">
                    <div class="text-4xl mb-2">🛁</div>
                    <h3 class="font-semibold text-gray-800">お風呂</h3>
                    <p class="text-sm text-gray-600">浴槽・壁・床</p>
                </div>
                
                <div class="choice-card border-2 border-gray-200 rounded-xl p-6 text-center" data-location="toilet">
                    <div class="text-4xl mb-2">🚽</div>
                    <h3 class="font-semibold text-gray-800">トイレ</h3>
                    <p class="text-sm text-gray-600">便器・床・壁</p>
                </div>
                
                <div class="choice-card border-2 border-gray-200 rounded-xl p-6 text-center" data-location="window">
                    <div class="text-4xl mb-2">🪟</div>
                    <h3 class="font-semibold text-gray-800">窓・ガラス</h3>
                    <p class="text-sm text-gray-600">窓ガラス・サッシ</p>
                </div>
                
                <div class="choice-card border-2 border-gray-200 rounded-xl p-6 text-center" data-location="floor">
                    <div class="text-4xl mb-2">🧹</div>
                    <h3 class="font-semibold text-gray-800">床・絨毯</h3>
                    <p class="text-sm text-gray-600">フローリング・畳</p>
                </div>
                
                <div class="choice-card border-2 border-gray-200 rounded-xl p-6 text-center" data-location="living">
                    <div class="text-4xl mb-2">🛋️</div>
                    <h3 class="font-semibold text-gray-800">リビング</h3>
                    <p class="text-sm text-gray-600">家具・テーブル</p>
                </div>
            </div>
        </div>

        <!-- ステップ2: 汚れの程度選択 -->
        <div id="step2" class="step-content hidden">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">🎯 汚れの程度はどれくらいですか？</h2>
                <p class="text-gray-600">該当する汚れの程度を選択してください</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 max-w-2xl mx-auto">
                <!-- モバイル用ヒント -->
                <div class="swipe-hint col-span-full text-center text-sm text-gray-500 mb-2 md:hidden">
                    🎯 汚れの程度をお選びください
                </div>
                <div class="choice-card border-2 border-gray-200 rounded-xl p-6 text-center" data-level="light">
                    <div class="text-4xl mb-4">✨</div>
                    <h3 class="font-semibold text-gray-800 mb-2">軽い汚れ</h3>
                    <p class="text-sm text-gray-600">日常的な汚れ<br>少しの手入れで取れそう</p>
                </div>
                
                <div class="choice-card border-2 border-gray-200 rounded-xl p-6 text-center" data-level="heavy">
                    <div class="text-4xl mb-4">🚨</div>
                    <h3 class="font-semibold text-gray-800 mb-2">頑固な汚れ</h3>
                    <p class="text-sm text-gray-600">長期間放置した汚れ<br>専用洗剤が必要</p>
                </div>
            </div>
            
            <div class="text-center">
                <button id="backToStep1" class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 mr-4">
                    ← 戻る
                </button>
            </div>
        </div>

        <!-- ステップ3: 写真アップロード -->
        <div id="step3" class="step-content hidden">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">📷 写真をアップロード（任意）</h2>
                <p class="text-gray-600">より正確な診断のために写真をアップロードできます</p>
                <p class="text-green-600 font-semibold mt-2">写真なしでも十分な診断が可能です！</p>
                <!-- モバイル用説明 -->
                <p class="text-sm text-gray-500 mt-2 md:hidden">
                    📱 カメラでその場で撮影、またはギャラリーから選択できます
                </p>
            </div>
            
            <div class="max-w-md mx-auto">
                <!-- 写真なし診断を優先表示 -->
                <div class="bg-green-50 border-2 border-green-200 rounded-xl p-6 text-center mb-6">
                    <div class="text-4xl mb-2">⚡</div>
                    <h3 class="font-semibold text-green-800 mb-2">すぐに診断開始</h3>
                    <p class="text-green-700 text-sm mb-4">場所と汚れ程度の選択だけで<br>適切な掃除方法をご提案します</p>
                    <button id="skipPhoto" class="bg-green-500 text-white px-8 py-3 rounded-lg hover:bg-green-600 font-semibold">
                        写真なしで診断開始
                    </button>
                </div>
                
                <!-- 写真アップロード（オプション） -->
                <div class="border-2 border-dashed border-gray-300 rounded-xl p-6 text-center mb-6">
                    <div class="text-3xl mb-2">📁</div>
                    <p class="text-gray-600 mb-4 text-sm">さらに詳細な診断をご希望の場合<br>写真をアップロードしてください</p>
                    <input type="file" id="imageInput" accept="image/*" class="hidden">
                    <button id="selectImageBtn" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600">
                        写真を選択
                    </button>
                </div>
                
                <div id="imagePreview" class="hidden mb-6">
                    <img id="previewImg" class="w-full rounded-lg shadow-md">
                    <button id="analyzeWithPhoto" class="bg-green-500 text-white px-8 py-3 rounded-lg hover:bg-green-600 mt-4 w-full font-semibold">
                        写真で詳細診断開始
                    </button>
                </div>
                
                <div class="text-center">
                    <button id="backToStep2" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 text-sm">
                        ← 戻る
                    </button>
                </div>
            </div>
        </div>

        <!-- ステップ4: 結果表示 -->
        <div id="step4" class="step-content hidden">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-2">🎉 診断結果</h2>
                <p class="text-gray-600">あなたにおすすめの掃除方法と商品をご紹介します</p>
            </div>
            
            <!-- ローディング -->
            <div id="analysisLoading" class="text-center py-8">
                <div class="loading-spinner w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"></div>
                <p class="text-gray-600">AI分析中...</p>
            </div>
            
            <!-- 結果表示エリア -->
            <div id="analysisResult" class="hidden">
                <!-- 掃除方法 -->
                <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">🧽 おすすめ掃除方法</h3>
                    <div id="cleaningMethod" class="text-gray-700"></div>
                </div>
                
                <!-- おすすめ商品 -->
                <div class="bg-white rounded-xl shadow-md p-6 mb-6">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">🛒 おすすめ商品</h3>
                    <div id="recommendedProducts" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                </div>
                
                <!-- アクション -->
                <div class="text-center">
                    <button id="newAnalysis" class="bg-blue-500 text-white px-8 py-3 rounded-lg hover:bg-blue-600 mr-4">
                        新しい診断を開始
                    </button>
                    <button id="shareResult" class="bg-green-500 text-white px-8 py-3 rounded-lg hover:bg-green-600">
                        結果をシェア
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- フッター -->
    <footer class="bg-white border-t mt-12">
        <div class="container mx-auto max-w-4xl px-4 py-6 text-center text-gray-600">
            <p>&copy; 2024 AI掃除アドバイザー. All rights reserved.</p>
        </div>
    </footer>

    <!-- 既存データベース -->
    <script src="comprehensive-cleaning-products.js"></script>
    
    <!-- 新しいステップバイステップ JavaScript -->
    <script src="app.js?v=2024061402"></script>
</body>
</html>