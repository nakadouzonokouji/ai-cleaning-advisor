<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚µãƒ–ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .info { color: blue; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 4px; overflow-x: auto; }
        button { padding: 8px 16px; margin: 5px; cursor: pointer; }
        .test-result { margin: 10px 0; padding: 10px; border-left: 4px solid #ddd; }
        .test-result.success { border-left-color: green; background: #f0fff0; }
        .test-result.error { border-left-color: red; background: #fff0f0; }
    </style>
</head>
<body>
    <h1>ğŸ§ª ã‚µãƒ–ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-section">
        <h2>ãƒ†ã‚¹ãƒˆ1: ã‚¯ãƒ©ã‚¹åˆæœŸåŒ–</h2>
        <button onclick="testClassInitialization()">åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <div id="init-results"></div>
    </div>
    
    <div class="test-section">
        <h2>ãƒ†ã‚¹ãƒˆ2: ã‚µãƒ–ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°</h2>
        <button onclick="testSublocationFunctions()">é–¢æ•°ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <div id="function-results"></div>
    </div>
    
    <div class="test-section">
        <h2>ãƒ†ã‚¹ãƒˆ3: å•†å“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testProductIntegration()">å•†å“DBãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <div id="product-results"></div>
    </div>
    
    <div class="test-section">
        <h2>ãƒ†ã‚¹ãƒˆ4: HTMLã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼</h2>
        <button onclick="testEventListeners()">ã‚¤ãƒ™ãƒ³ãƒˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
        <div id="event-results"></div>
    </div>

    <script src="app.js"></script>
    <script>
        function testClassInitialization() {
            const resultsDiv = document.getElementById('init-results');
            
            try {
                console.log('ğŸš€ ã‚¯ãƒ©ã‚¹åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆé–‹å§‹');
                const advisor = new StepWiseCleaningAdvisor();
                
                let html = '<div class="test-result success">âœ… ã‚¯ãƒ©ã‚¹åˆæœŸåŒ–æˆåŠŸ</div>';
                
                // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç¢ºèª
                const hasLocation = advisor.hasOwnProperty('selectedLocation');
                const hasSublocation = advisor.hasOwnProperty('selectedSublocation');
                const hasLevel = advisor.hasOwnProperty('selectedLevel');
                const hasCurrentStep = advisor.hasOwnProperty('currentStep');
                
                html += `<div class="test-result ${hasLocation ? 'success' : 'error'}">
                    ${hasLocation ? 'âœ…' : 'âŒ'} selectedLocation ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£: ${hasLocation}
                </div>`;
                
                html += `<div class="test-result ${hasSublocation ? 'success' : 'error'}">
                    ${hasSublocation ? 'âœ…' : 'âŒ'} selectedSublocation ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£: ${hasSublocation}
                </div>`;
                
                html += `<div class="test-result ${hasLevel ? 'success' : 'error'}">
                    ${hasLevel ? 'âœ…' : 'âŒ'} selectedLevel ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£: ${hasLevel}
                </div>`;
                
                html += `<div class="test-result ${hasCurrentStep ? 'success' : 'error'}">
                    ${hasCurrentStep ? 'âœ…' : 'âŒ'} currentStep ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£: ${hasCurrentStep} (å€¤: ${advisor.currentStep})
                </div>`;
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                console.error('âŒ åˆæœŸåŒ–ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                resultsDiv.innerHTML = `<div class="test-result error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }
        
        function testSublocationFunctions() {
            const resultsDiv = document.getElementById('function-results');
            
            try {
                console.log('ğŸ¯ ã‚µãƒ–ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°ãƒ†ã‚¹ãƒˆé–‹å§‹');
                const advisor = new StepWiseCleaningAdvisor();
                
                let html = '<div class="test-result success">âœ… é–¢æ•°ãƒ†ã‚¹ãƒˆé–‹å§‹</div>';
                
                // showSublocationStepé–¢æ•°ãƒ†ã‚¹ãƒˆ
                const hasShowSublocation = typeof advisor.showSublocationStep === 'function';
                html += `<div class="test-result ${hasShowSublocation ? 'success' : 'error'}">
                    ${hasShowSublocation ? 'âœ…' : 'âŒ'} showSublocationStep é–¢æ•°: ${hasShowSublocation}
                </div>`;
                
                // selectSublocationé–¢æ•°ãƒ†ã‚¹ãƒˆ
                const hasSelectSublocation = typeof advisor.selectSublocation === 'function';
                html += `<div class="test-result ${hasSelectSublocation ? 'success' : 'error'}">
                    ${hasSelectSublocation ? 'âœ…' : 'âŒ'} selectSublocation é–¢æ•°: ${hasSelectSublocation}
                </div>`;
                
                // getLocationSpecificCleanersé–¢æ•°ãƒ†ã‚¹ãƒˆï¼ˆã‚µãƒ–ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œç¢ºèªï¼‰
                const testProducts = advisor.getLocationSpecificCleaners('kitchen_stove', 1);
                const hasProducts = Array.isArray(testProducts) && testProducts.length > 0;
                
                html += `<div class="test-result ${hasProducts ? 'success' : 'error'}">
                    ${hasProducts ? 'âœ…' : 'âŒ'} getLocationSpecificCleaners(kitchen_stove): ${testProducts.length}å€‹ã®å•†å“
                </div>`;
                
                if (hasProducts) {
                    html += '<div class="info"><h4>ã‚µãƒ³ãƒ—ãƒ«å•†å“:</h4>';
                    testProducts.slice(0, 2).forEach(product => {
                        html += `<pre>${JSON.stringify(product, null, 2)}</pre>`;
                    });
                    html += '</div>';
                }
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                console.error('âŒ é–¢æ•°ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                resultsDiv.innerHTML = `<div class="test-result error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }
        
        function testProductIntegration() {
            const resultsDiv = document.getElementById('product-results');
            
            try {
                console.log('ğŸ›’ å•†å“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹');
                const advisor = new StepWiseCleaningAdvisor();
                
                let html = '<div class="test-result success">âœ… å•†å“çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹</div>';
                
                // å„ã‚µãƒ–ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ
                const testCases = [
                    { location: 'kitchen_stove', level: 1, name: 'ã‚¬ã‚¹ã‚³ãƒ³ãƒ­è»½ã„æ±šã‚Œ' },
                    { location: 'kitchen_stove', level: 2, name: 'ã‚¬ã‚¹ã‚³ãƒ³ãƒ­é ‘å›ºãªæ±šã‚Œ' },
                    { location: 'kitchen_ih', level: 1, name: 'IHã‚³ãƒ³ãƒ­è»½ã„æ±šã‚Œ' },
                    { location: 'kitchen_ih', level: 2, name: 'IHã‚³ãƒ³ãƒ­é ‘å›ºãªæ±šã‚Œ' },
                    { location: 'kitchen_sink', level: 1, name: 'ã‚­ãƒƒãƒãƒ³ã‚·ãƒ³ã‚¯' },
                    { location: 'bathroom_tub', level: 1, name: 'æµ´å®¤æµ´æ§½' },
                    { location: 'toilet_bowl', level: 1, name: 'ãƒˆã‚¤ãƒ¬ä¾¿å™¨å†…' }
                ];
                
                testCases.forEach(testCase => {
                    const products = advisor.getLocationSpecificCleaners(testCase.location, testCase.level);
                    const hasProducts = Array.isArray(products) && products.length > 0;
                    
                    html += `<div class="test-result ${hasProducts ? 'success' : 'error'}">
                        ${hasProducts ? 'âœ…' : 'âŒ'} ${testCase.name}: ${products.length}å€‹ã®å•†å“
                    </div>`;
                    
                    if (hasProducts && products.length > 0) {
                        // ASINãƒã‚§ãƒƒã‚¯
                        const firstProduct = products[0];
                        const hasValidAsin = firstProduct.asin && firstProduct.asin.length > 5;
                        html += `<div class="test-result ${hasValidAsin ? 'success' : 'error'}">
                            ${hasValidAsin ? 'âœ…' : 'âŒ'} æœ‰åŠ¹ASIN: ${firstProduct.asin}
                        </div>`;
                    }
                });
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                console.error('âŒ å•†å“çµ±åˆãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                resultsDiv.innerHTML = `<div class="test-result error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }
        
        function testEventListeners() {
            const resultsDiv = document.getElementById('event-results');
            
            try {
                console.log('ğŸ§ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ãƒ†ã‚¹ãƒˆé–‹å§‹');
                
                let html = '<div class="test-result success">âœ… ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ãƒ†ã‚¹ãƒˆé–‹å§‹</div>';
                
                // ã‚µãƒ–ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ¬ãƒ¡ãƒ³ãƒˆã®å­˜åœ¨ç¢ºèª
                const sublocationElements = document.querySelectorAll('[data-sublocation]');
                html += `<div class="test-result ${sublocationElements.length > 0 ? 'success' : 'error'}">
                    ${sublocationElements.length > 0 ? 'âœ…' : 'âŒ'} ã‚µãƒ–ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ : ${sublocationElements.length}å€‹
                </div>`;
                
                // æˆ»ã‚‹ãƒœã‚¿ãƒ³ã®å­˜åœ¨ç¢ºèª
                const backButtons = [
                    'backToStep1FromStep2',
                    'backToStep2FromStep3',
                    'backToStep3'
                ];
                
                backButtons.forEach(buttonId => {
                    const button = document.getElementById(buttonId);
                    html += `<div class="test-result ${button ? 'success' : 'error'}">
                        ${button ? 'âœ…' : 'âŒ'} ãƒœã‚¿ãƒ³ ${buttonId}: ${button ? 'å­˜åœ¨' : 'æœªç™ºè¦‹'}
                    </div>`;
                });
                
                // ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®ç¢ºèª
                const stepIndicators = document.querySelectorAll('[id$="-indicator"]');
                html += `<div class="test-result ${stepIndicators.length >= 5 ? 'success' : 'error'}">
                    ${stepIndicators.length >= 5 ? 'âœ…' : 'âŒ'} ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼: ${stepIndicators.length}å€‹ (æœŸå¾…å€¤: 5å€‹)
                </div>`;
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                console.error('âŒ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                resultsDiv.innerHTML = `<div class="test-result error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</div>`;
            }
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åŸºæœ¬ãƒã‚§ãƒƒã‚¯
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ‰ ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
            
            // åŸºæœ¬çš„ãªå­˜åœ¨ç¢ºèª
            console.log('StepWiseCleaningAdvisor ã‚¯ãƒ©ã‚¹:', typeof StepWiseCleaningAdvisor);
            console.log('DOMè¦ç´ æ•°:', document.querySelectorAll('*').length);
        });
    </script>
</body>
</html>